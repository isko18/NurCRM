# –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Construction

## üìã –û–±–∑–æ—Ä

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `construction` —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Å—Å–∞–º–∏, –¥–µ–Ω–µ–∂–Ω—ã–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ –∏ –∫–∞—Å—Å–æ–≤—ã–º–∏ —Å–º–µ–Ω–∞–º–∏ –¥–ª—è –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ–π CRM-—Å–∏—Å—Ç–µ–º—ã. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ —É—á–µ—Ç–∞.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

#### 1. **Cashbox (–ö–∞—Å—Å–∞)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∫–∞—Å—Å—É –∫–æ–º–ø–∞–Ω–∏–∏ –∏–ª–∏ —Ñ–∏–ª–∏–∞–ª–∞
- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è**:
  - `company`, `branch` - –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å
  - `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Å—Å—ã
  - `is_consumption` - —Ñ–ª–∞–≥ —Ä–∞—Å—Ö–æ–¥–Ω–æ–π –∫–∞—Å—Å—ã
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏/—Ñ–∏–ª–∏–∞–ª–∞ (signals)
  - –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω–∏ –≤ —Ä–∞–º–∫–∞—Ö branch/company
  - –ú–µ—Ç–æ–¥ `get_summary()` –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

#### 2. **CashShift (–ö–∞—Å—Å–æ–≤–∞—è —Å–º–µ–Ω–∞)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Å–æ–≤—ã–º–∏ —Å–º–µ–Ω–∞–º–∏ –∫–∞—Å—Å–∏—Ä–æ–≤
- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è**:
  - `cashbox`, `cashier` - –∫–∞—Å—Å–∞ –∏ –∫–∞—Å—Å–∏—Ä
  - `status` - OPEN/CLOSED
  - `opening_cash`, `closing_cash` - –Ω–∞—á–∞–ª—å–Ω–∞—è/–∫–æ–Ω–µ—á–Ω–∞—è —Å—É–º–º–∞
  - –ê–≥—Ä–µ–≥–∞—Ç—ã: `income_total`, `expense_total`, `sales_count`, `sales_total`, etc.
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö OPEN —Å–º–µ–Ω –Ω–∞ –æ–¥–Ω—É –∫–∞—Å—Å—É** (–Ω–æ –Ω–µ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∫–∞—Å—Å–∏—Ä–∞)
  - –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –æ–¥–∏–Ω –∫–∞—Å—Å–∏—Ä –Ω–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –¥–≤–µ OPEN —Å–º–µ–Ω—ã –Ω–∞ –æ–¥–Ω–æ–π –∫–∞—Å—Å–µ
  - –ú–µ—Ç–æ–¥ `calc_live_totals()` –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
  - –ú–µ—Ç–æ–¥ `close()` –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã —Å –ø–µ—Ä–µ—Å—á–µ—Ç–æ–º –∏—Ç–æ–≥–æ–≤

#### 3. **CashFlow (–î–≤–∏–∂–µ–Ω–∏–µ –ø–æ –∫–∞—Å—Å–µ)**
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£—á–µ—Ç –ø—Ä–∏—Ö–æ–¥–æ–≤ –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –∫–∞—Å—Å–µ
- **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è**:
  - `type` - INCOME/EXPENSE
  - `status` - PENDING/APPROVED/REJECTED
  - `cashbox`, `shift`, `cashier` - —Å–≤—è–∑–∏
  - `amount` - —Å—É–º–º–∞
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Å–º–µ–Ω–µ –∏–ª–∏ –±—ã—Ç—å –æ–±—â–∏–º
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ company/branch –∏–∑ cashbox
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ cashier –∏–∑ shift
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—É–º–º—ã (CheckConstraint)

## üîç –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Å–∞–º–∏
- –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Å—Å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏/—Ñ–∏–ª–∏–∞–ª–∞
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∫–∞—Å—Å–µ (–¥–æ—Ö–æ–¥—ã, —Ä–∞—Å—Ö–æ–¥—ã, –ø—Ä–æ–¥–∞–∂–∏)

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ–Ω–∞–º–∏
- –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã)
- –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã —Å –ø–µ—Ä–µ—Å—á–µ—Ç–æ–º –∏—Ç–æ–≥–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Å–º–µ–Ω
- –†–∞—Å—á–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–π —Å—É–º–º—ã –Ω–∞–ª–∏—á–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### 3. –î–≤–∏–∂–µ–Ω–∏—è –ø–æ –∫–∞—Å—Å–µ
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–æ–≤/—Ä–∞—Å—Ö–æ–¥–æ–≤
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–º–µ–Ω–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Å—Å–µ, —Å–º–µ–Ω–µ, –∫–∞—Å—Å–∏—Ä—É

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ–¥–∞–∂–∞–º–∏
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ Sale —á–µ—Ä–µ–∑ `_guess_sale_model()`
- –ü–æ–¥—Å—á–µ—Ç –ø—Ä–æ–¥–∞–∂ –ø–æ –∫–∞—Å—Å–µ/—Å–º–µ–Ω–µ
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–∞–ª–∏—á–Ω—ã–µ/–±–µ–∑–Ω–∞–ª–∏—á–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–¥–∞–∂ –ø–æ —Å–º–µ–Ω–µ

## ‚ö†Ô∏è –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ verbose_name –≤ –º–æ–¥–µ–ª—è—Ö**
- ‚ùå `CashShift` - –Ω–µ—Ç `verbose_name` –¥–ª—è –ø–æ–ª–µ–π
- ‚ùå `CashFlow` - –Ω–µ –≤—Å–µ –ø–æ–ª—è –∏–º–µ—é—Ç `verbose_name`
- ‚ùå –ù–µ—Ç `verbose_name` –∏ `verbose_name_plural` –≤ Meta –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–æ–¥–µ–ª–µ–π

### 2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**
- –§—É–Ω–∫—Ü–∏–∏ `_get_company()`, `_is_owner_like()`, `_fixed_branch_from_user()` –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –≤:
  - `views.py`
  - `serializers.py`
  - `sale_history_views.py`
  - `admin.py`
- **–†–µ—à–µ–Ω–∏–µ**: –í—ã–Ω–µ—Å—Ç–∏ –≤ –æ–±—â–∏–π –º–æ–¥—É–ª—å `apps/construction/utils.py` –∏–ª–∏ –±–∞–∑–æ–≤—ã–π –º–∏–∫—Å–∏–Ω

### 3. **N+1 –∑–∞–ø—Ä–æ—Å—ã**
- –í `CashboxListCreateView.list()` –µ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –Ω–æ:
  - ‚ùå `CashboxDetailView` –º–æ–∂–µ—Ç –∏–º–µ—Ç—å N+1 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ flows
  - ‚ùå `CashShiftListView` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `select_related`, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–ª—É—á—à–µ–Ω

### 4. **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é**
- `get_summary()` –≤ `Cashbox` –¥–µ–ª–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- `calc_live_totals()` –≤ `CashShift` –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

### 5. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- ‚úÖ –ï—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ `clean()` –º–µ—Ç–æ–¥–∞—Ö
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `select_for_update()` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è race conditions
- ‚ö†Ô∏è –ù–æ –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–º–µ–Ω

### 6. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- –í `_guess_sale_model()` –µ—Å—Ç—å try/except, –Ω–æ –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å None
- –ù–µ—Ç —è–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ –º–æ–¥–µ–ª—å Sale –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

### 7. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
- ‚ùå –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –≤ `tests.py` (—Ñ–∞–π–ª –ø—É—Å—Ç–æ–π –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–µ–∑ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏

### 8. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ docstrings
- –ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

## ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

1. **–•–æ—Ä–æ—à–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç–∏**
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –ø–æ company/branch
   - –ú–∏–∫—Å–∏–Ω—ã –¥–ª—è scope'–∏—Ä–æ–≤–∞–Ω–∏—è

2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `select_related` –∏ `prefetch_related`
   - –ë–∞—Ç—á–∏–Ω–≥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ `CashboxListCreateView`

3. **–ì–∏–±–∫–æ—Å—Ç—å**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö OPEN —Å–º–µ–Ω –Ω–∞ –∫–∞—Å—Å—É
   - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ CashFlow –∫ —Å–º–µ–Ω–µ

4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥–µ–ª–∏ –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–∞

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ)

1. **–î–æ–±–∞–≤–∏—Ç—å verbose_name –≤–µ–∑–¥–µ**
   ```python
   # –í –º–æ–¥–µ–ª—è—Ö –¥–æ–±–∞–≤–∏—Ç—å verbose_name –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
   # –î–æ–±–∞–≤–∏—Ç—å Meta.verbose_name –∏ verbose_name_plural
   ```

2. **–í—ã–Ω–µ—Å—Ç–∏ –æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ utils**
   ```python
   # apps/construction/utils.py
   def get_company_from_user(user): ...
   def is_owner_like(user): ...
   def fixed_branch_from_user(user, company): ...
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã**
   - –¢–µ—Å—Ç—ã –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω
   - –¢–µ—Å—Ç—ã –¥–ª—è CashFlow
   - –¢–µ—Å—Ç—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –¢–µ—Å—Ç—ã –¥–ª—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ)

4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∫–∞—Å—Å
   - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è `calc_live_totals()`

5. **–£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫**
   - –Ø–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –º–æ–¥–µ–ª–∏ Sale
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
   - –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

6. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–º–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Å—É–º–º—ã (—É–∂–µ –µ—Å—Ç—å CheckConstraint)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ)

7. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - Docstrings –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
   - –û–ø–∏—Å–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

8. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**
   - –£–ø—Ä–æ—Å—Ç–∏—Ç—å `_guess_sale_model()` - –≤–æ–∑–º–æ–∂–Ω–æ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É branch –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏**: 0% ‚ùå
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: 30% ‚ö†Ô∏è
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**: 70% ‚úÖ
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: 80% ‚úÖ
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: 85% ‚úÖ
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞**: 75% ‚úÖ

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `apps.users` - Company, Branch, User
- `apps.main` - Sale, SaleItem (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è)
- Django ORM, DRF

## üìù –í—ã–≤–æ–¥—ã

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `construction` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Å—Å–∞–º–∏ –∏ –¥–µ–Ω–µ–∂–Ω—ã–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤
2. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
3. –ù–µ–ø–æ–ª–Ω—ã–µ verbose_name
4. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—á–∞—Ç—å —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è verbose_name, –≤—ã–Ω–æ—Å–∞ –æ–±—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤.
