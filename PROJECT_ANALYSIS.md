# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ NurCRM

## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**NurCRM** ‚Äî –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è CRM-—Å–∏—Å—Ç–µ–º–∞ –Ω–∞ Django, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å–æ–º –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ—Ç—Ä–∞—Å–ª—è—Ö.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Backend**: Django 5.2.1
- **API**: Django REST Framework 3.16.0
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT (djangorestframework-simplejwt)
- **WebSocket**: Django Channels 4.2.2
- **–û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á**: Celery 5.5.3
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQLite (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ), PostgreSQL (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ)
- **–ö—ç—à/–ë—Ä–æ–∫–µ—Ä**: Redis
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**: drf-yasg (Swagger/ReDoc)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

–ü—Ä–æ–µ–∫—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –ø–æ –º–æ–¥—É–ª—å–Ω–æ–º—É –ø—Ä–∏–Ω—Ü–∏–ø—É —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ –±–∏–∑–Ω–µ—Å-–¥–æ–º–µ–Ω–∞–º:

#### 1. **apps/main** ‚Äî –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **–ú–æ–¥–µ–ª–∏**: 44+ –º–æ–¥–µ–ª–µ–π
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ –∏ –∫–∞—Ç–∞–ª–æ–≥–æ–º
  - –ü—Ä–æ–¥–∞–∂–∏ (Sale, SaleItem)
  - –ö–ª–∏–µ–Ω—Ç—ã –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã
  - –í–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂ (Pipeline, Deal)
  - –°–∫–ª–∞–¥—ã –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è
  - –ê–≥–µ–Ω—Ç—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–∞–∂ —Å FIFO-–∞–ª–ª–æ–∫–∞—Ü–∏–µ–π
  - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (–∞–≥–µ–Ω—Ç—ã, —Ä—ã–Ω–æ–∫, –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ)
  - –ö–æ—Ä–∑–∏–Ω—ã –∏ POS-—Å–∏—Å—Ç–µ–º–∞
  - –î–æ–ª–≥–∏ –∏ –ø–ª–∞—Ç–µ–∂–∏
  - –î–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç

#### 2. **apps/users** ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ö–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å User (AbstractBaseUser)
- –ö–æ–º–ø–∞–Ω–∏–∏ –∏ —Ñ–∏–ª–∏–∞–ª—ã (Company, Branch)
- –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (30+ —Ñ–ª–∞–≥–æ–≤ can_view_*)
- –¢–∞—Ä–∏—Ñ—ã –∏ –ø–æ–¥–ø–∏—Å–∫–∏ (SubscriptionPlan, Feature)
- –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–∞ (–∫–æ–º–ø–∞–Ω–∏—è ‚Üí —Ñ–∏–ª–∏–∞–ª ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)

#### 3. **apps/construction** ‚Äî –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ
- –ö–∞—Å—Å—ã –∏ —Å–º–µ–Ω—ã (Cashbox, CashShift)
- –û–±—ä–µ–∫—Ç—ã —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
- –†–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏
- –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–¥–∞–∂

#### 4. **apps/barber** ‚Äî –ë–∞—Ä–±–µ—Ä—à–æ–ø
- –ö–ª–∏–µ–Ω—Ç—ã
- –£—Å–ª—É–≥–∏
- –ó–∞–ø–∏—Å–∏
- –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–µ—â–µ–Ω–∏–π

#### 5. **apps/cafe** ‚Äî –ö–∞—Ñ–µ/–†–µ—Å—Ç–æ—Ä–∞–Ω
- –ú–µ–Ω—é
- –ó–∞–∫–∞–∑—ã
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–æ–≤
- –ó–∞–∫—É–ø–∫–∏
- –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è
- –ö—É—Ö–Ω—è

#### 6. **apps/education** ‚Äî –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
- –£—á–µ–Ω–∏–∫–∏
- –ì—Ä—É–ø–ø—ã
- –ó–∞–Ω—è—Ç–∏—è
- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏
- –õ–∏–¥—ã
- –°—á–µ—Ç–∞

#### 7. **apps/booking** ‚Äî –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

#### 8. **apps/whatsapp** ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è WhatsApp
- WebSocket –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π

#### 9. **apps/instagram** ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Instagram
- WebSocket –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –ê–≤—Ç–æ–ª–æ–≥–∏–Ω
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ (Celery)

#### 10. **apps/storehouse** ‚Äî –°–∫–ª–∞–¥
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥—Å–∫–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏

#### 11. **apps/logistics** ‚Äî –õ–æ–≥–∏—Å—Ç–∏–∫–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∞–º–∏

#### 12. **apps/consalting** ‚Äî –ö–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥
- –£—Å–ª—É–≥–∏ –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–∞

#### 13. **apps/scale** ‚Äî –í–µ—Å—ã
- WebSocket –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤–µ—Å–æ–≤
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —Å –≤–µ—Å–æ–≤

---

## üîë –ö–ª—é—á–µ–≤—ã–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã

### 1. –ê–≥–µ–Ω—Ç—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–∞–∂ (FIFO)

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
- –ê–≥–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —Ç–æ–≤–∞—Ä—ã —á–µ—Ä–µ–∑ `ManufactureSubreal` (–ø–µ—Ä–µ–¥–∞—á–∏)
- –ü—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è FIFO (First In, First Out)
- –û—Å—Ç–∞—Ç–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è: `qty_accepted - qty_returned - qty_sold`
- –ê–ª–ª–æ–∫–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `AgentSaleAllocation`
- –ü—Ä–æ–¥–∞–∂–∏ –∞–≥–µ–Ω—Ç–æ–≤ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–º–µ–Ω—ã (CashShift)

**–§–∞–π–ª—ã:**
- `apps/main/services_agent_pos.py` ‚Äî —á–µ–∫–∞—É—Ç –∫–æ—Ä–∑–∏–Ω—ã –∞–≥–µ–Ω—Ç–∞
- `apps/main/analytics_agent.py` ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∞–≥–µ–Ω—Ç–∞–º
- `apps/main/models.py` ‚Äî –º–æ–¥–µ–ª–∏ ManufactureSubreal, AgentSaleAllocation

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –¢–æ–ª—å–∫–æ —Ü–µ–ª—ã–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (—à—Ç—É—á–Ω—ã–π —Ç–æ–≤–∞—Ä)
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–ø–∏—Å–µ–π —á–µ—Ä–µ–∑ `select_for_update()`
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
- –û—Ç–¥–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç –æ–±—ã—á–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂

### 2. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

**–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –º–æ–¥–µ–ª—å:**
1. **–°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–æ–ª–∏**: ADMIN, OWNER
2. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ä–æ–ª–∏**: –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∞–Ω–∏–∏
3. **–§–ª–∞–≥–∏ –¥–æ—Å—Ç—É–ø–∞**: 30+ —Ñ–ª–∞–≥–æ–≤ `can_view_*` –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–§–∏–ª–∏–∞–ª—ã**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∏–ª–∏–∞–ª–∞—Ö
5. **–¢–∞—Ä–∏—Ñ—ã**: SubscriptionPlan —Å Feature

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ soft-delete –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫ –∫–æ–º–ø–∞–Ω–∏–∏/—Ñ–∏–ª–∏–∞–ª—É

### 3. –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å

- –ö–∞–∂–¥–∞—è –∫–æ–º–ø–∞–Ω–∏—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞
- –§–∏–ª–∏–∞–ª—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–º–ø–∞–Ω–∏–∏
- –í—Å–µ –º–æ–¥–µ–ª–∏ –∏–º–µ—é—Ç `company` –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `branch`

### 4. WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- **Instagram**: —Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Å–æ–æ–±—â–µ–Ω–∏–π
- **WhatsApp**: —á–∞—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **Scale**: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤
- JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è WebSocket

---

## üìä –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (–æ—Å–Ω–æ–≤–Ω—ã–µ)

### –ü—Ä–æ–¥–∞–∂–∏
- `Sale` ‚Äî –ø—Ä–æ–¥–∞–∂–∞
- `SaleItem` ‚Äî –ø–æ–∑–∏—Ü–∏—è –ø—Ä–æ–¥–∞–∂–∏
- `Cart` ‚Äî –∫–æ—Ä–∑–∏–Ω–∞
- `AgentRequestCart` ‚Äî –∫–æ—Ä–∑–∏–Ω–∞ –∞–≥–µ–Ω—Ç–∞

### –ü—Ä–æ–¥—É–∫—Ç—ã
- `Product` ‚Äî —Ç–æ–≤–∞—Ä/—É—Å–ª—É–≥–∞/–∫–æ–º–ø–ª–µ–∫—Ç
- `ProductBrand` ‚Äî –±—Ä–µ–Ω–¥
- `ProductCategory` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è (MPTT)
- `ProductImage` ‚Äî –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `ProductPackage` ‚Äî —É–ø–∞–∫–æ–≤–∫–∏
- `ProductCharacteristics` ‚Äî —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### –ê–≥–µ–Ω—Ç—ã
- `ManufactureSubreal` ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–æ–≤–∞—Ä–∞ –∞–≥–µ–Ω—Ç—É
- `Acceptance` ‚Äî –ø—Ä–∏—ë–º–∫–∞ –ø–µ—Ä–µ–¥–∞—á–∏
- `ReturnFromAgent` ‚Äî –≤–æ–∑–≤—Ä–∞—Ç –æ—Ç –∞–≥–µ–Ω—Ç–∞
- `AgentSaleAllocation` ‚Äî –∞–ª–ª–æ–∫–∞—Ü–∏—è –ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ –ø–µ—Ä–µ–¥–∞—á—É (FIFO)

### –ö–ª–∏–µ–Ω—Ç—ã
- `Client` ‚Äî –∫–ª–∏–µ–Ω—Ç
- `Contact` ‚Äî –∫–æ–Ω—Ç–∞–∫—Ç
- `ClientDeal` ‚Äî —Å–¥–µ–ª–∫–∞ —Å –∫–ª–∏–µ–Ω—Ç–æ–º
- `DealInstallment` ‚Äî —Ä–∞—Å—Å—Ä–æ—á–∫–∞

### –§–∏–Ω–∞–Ω—Å—ã
- `Debt` ‚Äî –¥–æ–ª–≥
- `DebtPayment` ‚Äî –ø–ª–∞—Ç–µ–∂ –ø–æ –¥–æ–ª–≥—É
- `TransactionRecord` ‚Äî –∑–∞–ø–∏—Å—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `DealPayment` ‚Äî –ø–ª–∞—Ç–µ–∂ –ø–æ —Å–¥–µ–ª–∫–µ

### CRM
- `Pipeline` ‚Äî –≤–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂
- `Deal` ‚Äî —Å–¥–µ–ª–∫–∞
- `Task` ‚Äî –∑–∞–¥–∞—á–∞
- `Event` ‚Äî —Å–æ–±—ã—Ç–∏–µ

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚ö†Ô∏è **SECRET_KEY** –≤ –∫–æ–¥–µ (–Ω—É–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
- ‚ö†Ô∏è **JWT signing key** –≤ –∫–æ–¥–µ (`'devjwtsecret'`)
- ‚ö†Ô∏è **Email –ø–∞—Ä–æ–ª—å** –≤ –∫–æ–¥–µ
- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Soft-delete –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `select_related()` –∏ `prefetch_related()`
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª—è—Ö
- `select_for_update()` –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- –ê–≥—Ä–µ–≥–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ ORM

### –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `@transaction.atomic` –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥–µ–ª–µ–π (`clean()`)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ `IntegrityError`

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å
- Celery –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- WebSocket –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- Channels –¥–ª—è WebSocket

---

## üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ú–æ–¥—É–ª–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:
1. **analytics_agent.py** ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∞–≥–µ–Ω—Ç–∞–º
   - –ü–µ—Ä–µ–¥–∞—á–∏, –ø—Ä–∏—ë–º–∫–∏, –ø—Ä–æ–¥–∞–∂–∏
   - –û—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Ä—É–∫–∞—Ö
   - –ü—Ä–æ–¥–∞–∂–∏ –ø–æ —Ç–æ–≤–∞—Ä–∞–º –∏ –¥–∞—Ç–∞–º
   - –¢–û–ü —Ç–æ–≤–∞—Ä–æ–≤

2. **analytics_market.py** ‚Äî —Ä—ã–Ω–æ—á–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

3. **analytics_owner_production.py** ‚Äî –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

---

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ
1. **–°–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ**
   - `SECRET_KEY`, JWT –∫–ª—é—á, email –ø–∞—Ä–æ–ª—å –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ `.env`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `python-decouple` –∏–ª–∏ `django-environ`

2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
   - SQLite –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
   - –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å PostgreSQL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

3. **DEBUG = True**
   - –û—Ç–∫–ª—é—á–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### –í–∞–∂–Ω—ã–µ
1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
   - –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
   - –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –§–∞–π–ª—ã `tests.py` —Å—É—â–µ—Å—Ç–≤—É—é—Ç, –Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ
   - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∞–≥–µ–Ω—Ç—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã

3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - README –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π
   - –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API
   - –û–ø–∏—Å–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É

4. **–ú–∏–≥—Ä–∞—Ü–∏–∏**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–π
   - –ï—Å—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ —É–¥–∞–ª–µ–Ω–∏–∏ Department

### –£–ª—É—á—à–µ–Ω–∏—è
1. **–ö–æ–¥**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `checkout_agent_cart`)
   - –†–∞–∑–±–∏—Ç—å –Ω–∞ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
   - –î–æ–±–∞–≤–∏—Ç—å type hints –≤–µ–∑–¥–µ

2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤–∞–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ø—Ä–æ–¥–∞–∂–∏, –ø–µ—Ä–µ–¥–∞—á–∏)

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –î–æ–±–∞–≤–∏—Ç—å health checks
   - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É

---

## üéØ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

1. ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
2. ‚úÖ –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å
3. ‚úÖ –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤
4. ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ—Ç—Ä–∞—Å–ª–µ–π
5. ‚úÖ WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
6. ‚úÖ FIFO –¥–ª—è –∞–≥–µ–Ω—Ç—Å–∫–∏—Ö –ø—Ä–æ–¥–∞–∂
7. ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
8. ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
9. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger)

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - –í—ã–Ω–µ—Å—Ç–∏ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –î–æ–±–∞–≤–∏—Ç—å rate limiting
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
   - –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å connection pooling

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
   - –î–æ–±–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã

4. **CI/CD**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - Sentry –¥–ª—è –æ—à–∏–±–æ–∫
   - Prometheus –¥–ª—è –º–µ—Ç—Ä–∏–∫
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ ELK

---

## üìö –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–∫–ª—é—á–µ–≤—ã–µ)

- **Django 5.2.1** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **DRF 3.16.0** ‚Äî REST API
- **Channels 4.2.2** ‚Äî WebSocket
- **Celery 5.5.3** ‚Äî —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
- **Redis** ‚Äî –±—Ä–æ–∫–µ—Ä –∏ –∫—ç—à
- **instagrapi 2.1.5** ‚Äî Instagram API
- **Pillow** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **pandas** ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- **openpyxl** ‚Äî Excel
- **reportlab** ‚Äî PDF
- **qrcode** ‚Äî QR –∫–æ–¥—ã
- **python-escpos** ‚Äî –ø—Ä–∏–Ω—Ç–µ—Ä—ã

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. **Instagram** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
2. **WhatsApp** ‚Äî —á–∞—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
3. **Email** ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Gmail SMTP)
4. **–í–µ—Å—ã** ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
5. **–ü—Ä–∏–Ω—Ç–µ—Ä—ã** ‚Äî –ø–µ—á–∞—Ç—å —á–µ–∫–æ–≤ –∏ —ç—Ç–∏–∫–µ—Ç–æ–∫

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–π**: 13
- **–ú–æ–¥–µ–ª–µ–π**: 124+
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–π**: Django, DRF, Channels, Celery, Redis
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π**: Instagram, WhatsApp, Email, –í–µ—Å—ã, –ü—Ä–∏–Ω—Ç–µ—Ä—ã
- **–û—Ç—Ä–∞—Å–ª–µ–π**: –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ, –ë–∞—Ä–±–µ—Ä—à–æ–ø, –ö–∞—Ñ–µ, –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –ö–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥

---

*–ê–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω: 2025-01-27*

